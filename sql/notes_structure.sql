CREATE TABLE IF NOT EXISTS notes (id UUID DEFAULT uuid_generate_v4() PRIMARY KEY, telegram_id INTEGER NOT NULL, title VARCHAR(255) NOT NULL, content TEXT NOT NULL, created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP, updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP, tags TEXT[] DEFAULT '{}', importance INTEGER DEFAULT 0, urgency INTEGER DEFAULT 0, category VARCHAR(50) DEFAULT 'general', is_analyzed BOOLEAN DEFAULT false, analysis JSONB DEFAULT NULL); CREATE INDEX IF NOT EXISTS idx_notes_telegram_id ON notes(telegram_id); CREATE INDEX IF NOT EXISTS idx_notes_tags ON notes USING GIN(tags); CREATE INDEX IF NOT EXISTS idx_notes_category ON notes(category);
