# Раздел Контакты

## Общее описание
Раздел контактов предоставляет интерфейс для просмотра и управления контактами из Telegram. Контакты разделены на два типа:
- Личные чаты
- Групповые чаты

## Функциональность

### 1. Просмотр контактов
- Контакты отображаются в виде списка с основной информацией (имя, юзернейм, последнее сообщение)
- Контакты можно фильтровать по типу (личные/групповые) через табы
- Есть возможность показать только проанализированные контакты

### 2. Обновление контактов
- Кнопка "Обновить контакты" делает запрос к Яндекс функции
- Функция получает актуальный список контактов из Telegram
- Данные автоматически сохраняются в Supabase (таблица contacts_userbot_leo)

### 3. Анализ контактов
- Каждый контакт имеет свою карточку с детальной информацией
- В карточке можно запустить анализ переписки через DeepSeek AI
- Результаты анализа сохраняются в Supabase

## Технический стек
- Next.js для фронтенда
- Supabase для хранения данных
- Яндекс Cloud Functions для работы с Telegram
- DeepSeek AI для анализа переписки

## Структура данных

### Таблица contacts_userbot_leo
- user_id: ID пользователя в Telegram
- first_name: Имя
- last_name: Фамилия
- username: Юзернейм в Telegram
- last_message: Последнее сообщение
- is_pinned: Закреплен ли чат
- is_group: Тип чата (личный/групповой)
- summary: Результаты анализа

### Интеграции
1. Яндекс Cloud Function (d4e2knenkei4if251h2i)
   - Получает актуальный список контактов из Telegram
   - Требует YANDEX_API_KEY для авторизации

2. DeepSeek AI
   - Анализирует историю переписки
   - Генерирует психологический профиль и бизнес-анализ
   - Требует DEEPSEEK_API_KEY для работы

## Real-time обновления
- Используется Supabase Real-time для мгновенного обновления UI
- При изменении данных в таблице contacts_userbot_leo интерфейс обновляется автоматически

## Безопасность
- Все API ключи хранятся в .env.local
- Доступ к данным только через Supabase с правами пользователя 